---
layout: single
title: "코드숨 4주차 과제2: 레스토랑 정보 확인 및 예약 시스템 구축하기"
# categories: Git
categories:
  - React # HTML CSS JavaScript Server Algorithm Wecode Programmers CS Github Blog
tag: [리액트 기초, 리덕스] #tag는 여러개 가능함
toc: true #table of content 기능!
toc_sticky: true
author_profile: true #blog 글안에서는 author_profile이 따라다니지 않도록 설정함
date: 2022-08-27T13:00:00+09:00
# sidebar:
# nav: "docs" #네비게이션에 있는 docs를 의미함
---
<style>
.crimson {
  color: crimson;
  font-weight: bold;
}

.mediumblue {
  color: mediumblue;
  font-weight: bold;
}

.teal {
  color: teal;
  font-weight: bold;
}
</style>

# 코드숨 4주차 과제2: 레스토랑 정보 확인 및 예약 시스템 구축하기
<img src="https://user-images.githubusercontent.com/87808288/189558243-8412e9b7-05d4-4496-b6b6-ccf0dfd755fa.png" width="50%">

# commit 기록
## (1) App 컴포넌트를 간단히 화면에 보여주기 위한 테스트 및 구현
```jsx
// App.test.jsx
import React from 'react'; // add

import { render } from '@testing-library/react';

import App from './App';

test('App', () => {
  const { getByText } = render((
    <App />
  ));

  expect(getByText(/김밥제국/)).not.toBeNull();
}); // add
```

```jsx
// store.js
import { legacy_createStore as createStore } from 'redux';

import reducer from './reducer';

const store = createStore(reducer);

export default store;
```

```jsx
// App.jsx
export default function App() {
  return (
    <div>
      <h1>Restaurants</h1>
      <ul>
        <li>
          김밥제국
        </li>
      </ul>
    </div>
  );
}
```

## (2) Restaurants 컴포넌트를 추가하는 리팩터링
```jsx
// Restaurants.jsx
export default function Restaurants() {
  return (
    <ul>
      <li>
        김밥제국
      </li>
    </ul>
  );
}
```

```jsx
// App.jsx
import Restaurants from './Restaurants'; // add

export default function App() {
  return (
    <div>
      <h1>Restaurants</h1>
      <ul> // delete
        <li>
          김밥제국
        </li>
      </ul> // delete
      <Restaurants />
    </div>
  );
}
```

## (3) Restaurants 컴포넌트에서 음식점 목록을 화면에 렌더링하기 위한 테스트 및 구현
```jsx
// Restaurants.test.jsx
import React from 'react'; // add

import { render } from '@testing-library/react';

import Restaurants from './Restaurants';

test('Restaurants', () => {
  const restaurants = [
    {
      id: 1, name: '김밥제국', category: '분식', address: '서울시 강남구',
    },
  ];

  const { getByText } = render((
    <Restaurants restaurants={restaurants} />
  ));

  expect(getByText(/김밥제국/)).not.toBeNull();
}); // add
```

```jsx
// Restaurants.jsx
export default function Restaurants() { // delete
export default function Restaurants({ restaurants }) { // add
  return (
    <ul>
      <li> // delete
        김밥제국
      </li> // delete
      {restaurants.map((restaurant) => ( // add
        <li key={restaurant.id}>
          {restaurant.name}
          {' '}
          |
          {' '}
          {restaurant.category}
          {' '}
          |
          {' '}
          {restaurant.address}
        </li>
      ))} // add
    </ul>
  );
}
```

```jsx
// App.jsx
import Restaurants from './Restaurants';

export default function App() {
  const restaurants = [ // add
    {
      id: 1, name: '김밥제국', category: '분식', address: '서울시 강남구',
    },
  ]; // add
  return (
    <div>
      <h1>Restaurants</h1>
      <Restaurants /> // delete
      <Restaurants restaurants={restaurants} /> // add
    </div>
  );
}
```

## (4) RestaurantsContainer 컴포넌트의 useSelector를 확인하기 위한 액션을 테스트
```jsx
// RestaurantsContainer.test.jsax
import React from 'react'; // add

import { useSelector } from 'react-redux';

import { render } from '@testing-library/react';

import RestaurantsContainer from './RestaurantsContainer';

test('RestaurantsContainer', () => {
  useSelector.mockImplementation((selector) => selector({
    restaurants: [
      {
        id: 1, name: '김밥제국', category: '분식', address: '서울시 강남구',
      },
    ],
  }));

  const { getByText } = render((
    <RestaurantsContainer />
  ));

  expect(getByText(/김밥제국/)).not.toBeNull();
}); // add
```

```jsx
// RestaurantsContainer.jsx
import { useDispatch, useSelector } from 'react-redux'; // add

import Restaurants from './Restaurants';

export default function RestaurantsContainer() {
  const { restaurants } = useSelector((state) => ({
    restaurants: state.restaurants,
  }));

  return (
    <Restaurants restaurants={restaurants} />
  );
} // add
```

## (5) 테스트시 사용되는 변수 restaurants의 중복을 제거하기 위해 이를 모듈화
<img src="https://user-images.githubusercontent.com/87808288/189529724-dac514ff-019c-41a5-9a67-8710cb79ced5.png" width="30%">

```jsx
// fixtures/restaurants.js
const restaurants = [ // add
  {
    id: 1, name: '김밥제국', category: '분식', address: '서울시 강남구',
  },
];

export default restaurants; // add
```

```jsx
// RestaurantsContainer.test.jsx
import React from 'react';
import { useSelector } from 'react-redux';
import { render } from '@testing-library/react';

import RestaurantsContainer from './RestaurantsContainer';

import restaurants from '../../fixtures/restaurants'; // add

test('RestaurantsContainer', () => {
  useSelector.mockImplementation((selector) => selector({
    restaurants: [ // delete
      {
        id: 1, name: '김밥제국', category: '분식', address: '서울시 강남구',
      },
    ], // delete
    restaurants, //add
  }));

  const { getByText } = render((
    <RestaurantsContainer />
  ));
  expect(getByText(/김밥제국/)).not.toBeNull();
});
```

```jsx
// Restaurants.test.jsx
import React from 'react';

import { render } from '@testing-library/react';

import Restaurants from './Restaurants';

test('Restaurants', () => { // delete
  const restaurants = [
    {
      id: 1, name: '김밥제국', category: '분식', address: '서울시 강남구',
    },
  ]; // delete
import restaurants from '../../fixtures/restaurants'; // add

test('Restaurants', () => { // add
  const { getByText } = render((
    <Restaurants restaurants={restaurants} />
  ));
  expect(getByText(/김밥제국/)).not.toBeNull();
});
```

## (6) reducer 컴포넌트의 setRestaurants의 기초적인 액션을 위한 테스트 및 구현
```jsx
// reducer.test.js
import reducer from './reducer'; // add

import {
  setRestaurants,
} from './actions';

import restaurants from '../../fixtures/restaurants';

describe('reducer', () => {
  describe('setRestaurants', () => {
    it('changes restaurants array', () => {
      const initialState = {
        restaurants: [],
      };

      const state = reducer(initialState, setRestaurants(restaurants));

      expect(state).not.toHaveLength(0);
    });
  });
}); // add
```

```jsx
// __mocks__react-redux.js
export const useDispatch = jest.fn();

export const useSelector = jest.fn();
```

```jsx
// App.test.jsx
import React from 'react';

import { useSelector } from 'react-redux'; // add

import { render } from '@testing-library/react';

import App from './App';

import restaurants from '../../fixtures/restaurants'; // add

jest.mock('react-redux'); // add

test('App', () => {
  useSelector.mockImplementation((selector) => selector({ // add
    restaurants,
  })); // add

  const { getByText } = render((
    <App />
  ));
  expect(getByText(/김밥제국/)).not.toBeNull();
});
```

```jsx
// RestaurantsContainer.test.jsx
import React from 'react';
import { useSelector } from 'react-redux';
import { render } from '@testing-library/react';
import RestaurantsContainer from './RestaurantsContainer';

import restaurants from '../../fixtures/restaurants';

jest.mock('react-redux'); // add

test('RestaurantsContainer', () => {
  useSelector.mockImplementation((selector) => selector({
    restaurants,
  }));
  const { getByText } = render((
    <RestaurantsContainer />
  ));
  expect(getByText(/김밥제국/)).not.toBeNull();
});
```

```jsx
// actions.jsx
export function setRestaurants(restaurants) { // add
  return {
    type: 'setRestaurants',
    payload: {
      restaurants,
    },
  };
}

// TODO: delete this.
export function xxx() {
  //
} // add
```

```jsx
// reducer.js
const initialState = { // add
  restaurants: [],
};

export default function reducer(state = initialState, action) {
  return state;
} // add
```

```jsx
// App.jsx
import Restaurants from './Restaurants'; // delete
import { useEffect } from 'react'; // add

import { useDispatch } from 'react-redux';

import RestaurantsContainer from './RestaurantsContainer';

import {
  setRestaurants,
} from './actions'; // add

import restaurants from '../../fixtures/restaurants'; // add

export default function App() {
  const restaurants = [ // delete
    {
      id: 1, name: '김밥제국', category: '분식', address: '서울시 강남구',
    },
  ]; // delete
  const dispatch = useDispatch(); // add

  useEffect(() => {
    dispatch(setRestaurants(restaurants));
  }, []); // add

  return (
    <div>
      <h1>Restaurants</h1>
      <Restaurants restaurants={restaurants} /> // delete
      <RestaurantsContainer /> // add
    </div>
  );
}
```

## (7) App 테스트에서 dispatch를 호출하기 위한 액션을 테스트 및 구현
```jsx
// App.test.jsx
import React from 'react';

import { useSelector } from 'react-redux'; // delete
import { useDispatch, useSelector } from 'react-redux'; // add

import { render } from '@testing-library/react';

import App from './App';

import restaurants from '../../fixtures/restaurants';

jest.mock('react-redux');

test('App', () => {
  const dispatch = jest.fn(); // add

  useDispatch.mockImplementation(() => dispatch); // add

  useSelector.mockImplementation((selector) => selector({
    restaurants,
  }));

  const { getByText } = render((
    <App />
  ));

  expect(dispatch).toBeCalledWith({ // add
    type: 'setRestaurants',
    payload: { restaurants },
  }); // add

  expect(getByText(/김밥제국/)).not.toBeNull();
});
```

```jsx
// reducer.test.js
import reducer from './reducer';

import {
  setRestaurants,
} from './actions';

import restaurants from '../../fixtures/restaurants';

describe('reducer', () => {
  describe('setRestaurants', () => {
    it('changes restaurants array', () => {
      const initialState = {
        restaurants: [],
      };

    const state = reducer(initialState, setRestaurants(restaurants)); // delete
      const state = reducer(initialState, setRestaurants(restaurants)); // add

    expect(state).not.toHaveLength(0); // delete
      expect(state.restaurants).not.toHaveLength(0); // add
    }); // add
  });
});
```

```jsx
// reducer.js
const initialState = {
  restaurants: [],
};

export default function reducer(state = initialState, action) {
  if (action.type === 'setRestaurants') { // add
    const { restaurants } = action.payload;
    return {
      ...state,
      restaurants,
    };
  } // add
  return state;
}
```

## (8) RestaurantCreateContainer 컴포넌트의 기본적인 렌더링을 위한 액션을 테스트 및 구현
```jsx
// RestaurantCreateContainer.test.jsx
import React from 'react'; // add

import { useSelector } from 'react-redux';

import { render } from '@testing-library/react';

import RestaurantCreateContainer from './RestaurantCreateContainer';

jest.mock('react-redux');

test('RestaurantCreateContainer', () => {
  useSelector.mockImplementation((selector) => selector({
  }));

  const { getByText } = render((
    <RestaurantCreateContainer />
  ));

  expect(getByText(/등록/)).not.toBeNull(); // add
});
```

```jsx
// RestaurantCreateContainer.jsx
export default function RestaurantCreateContainer() { // add
  return (
    <div>
      <button type="button">
        등록
      </button>
    </div>
  );
} // add
```

```jsx
// App.jsx
import { useEffect } from 'react';

import { useDispatch } from 'react-redux';

import RestaurantsContainer from './RestaurantsContainer';
import RestaurantCreateContainer from './RestaurantCreateContainer'; // add

import {
  setRestaurants,
} from './actions';

import restaurants from '../../fixtures/restaurants';

export default function App() {
  const dispatch = useDispatch();

  useEffect(() => {
    dispatch(setRestaurants(restaurants));
  }, []);

  return (
    <div>
      <h1>Restaurants</h1>
      <RestaurantsContainer />
      <RestaurantCreateContainer /> // add
    </div>
  );
}
```

## (9) RestaurantForm 컴포넌트에서 등록 버튼 클릭시 일어나는 기본적인 액션을 테스트 및 구현
```jsx
// RestaurantForm.test.jsx

// 이 컴포넌트는 프레젠테이션 컨테이너기 때문에 리덕스의 존재를 몰라야함 //add
import { render, fireEvent } from '@testing-library/react';

import RestaurantForm from './RestaurantForm';

test('RestaurantForm', () => {
  const handleClick = jest.fn();

  const { getByText } = render((
    <RestaurantForm
      onClick={handleClick}
    />
  ));

  expect(getByText(/등록/)).not.toBeNull();

  fireEvent.click(getByText(/등록/));

  expect(handleClick).toBeCalled();
}); // add
```

```jsx
// RestaurantCreateContainer.test.jsx
import React from 'react';

import { useSelector } from 'react-redux'; // delete
import { useDispatch, useSelector } from 'react-redux'; // add

import { render } from '@testing-library/react'; // delete
import { fireEvent, render } from '@testing-library/react'; // add

import RestaurantCreateContainer from './RestaurantCreateContainer';

jest.mock('react-redux');

test('RestaurantCreateContainer', () => {
  const dispatch = jest.fn(); // add

  useDispatch.mockImplementation(() => dispatch); // add

  useSelector.mockImplementation((selector) => selector({
  }));

  const { getByText } = render((
    <RestaurantCreateContainer />
  ));

  expect(getByText(/등록/)).not.toBeNull();

  fireEvent.click(getByText(/등록/)); // add

  expect(dispatch).toBeCalledWith({ // add
    type: 'addRestaurant', // add
  }); // add
});
```

```jsx
// RestaurantCreateContainer.jsx
import { useDispatch } from 'react-redux'; // add

import RestaurantForm from './RestaurantForm'; // add

import { addRestaurant } from './actions'; // add

export default function RestaurantCreateContainer() {
  const dispatch = useDispatch(); // add

  function handleClick() { // add
    dispatch(addRestaurant()); // add
  } // add

  return (
    <div>
      <RestaurantForm /> // delete
      <RestaurantForm // add
        onClick={handleClick} // add
      /> // add
    </div>
  );
}
```

```jsx
// RestaurantForm.jsx
export default function RestaurantForm({ onClick }) { // add
  return (
    <div>
      <button
        type="button"
        onClick={onClick}
      >
        등록
      </button>
    </div>
  );
} // add
```

```jsx
// action.jsx
export function setRestaurants(restaurants) {
  return {
    type: 'setRestaurants',
    payload: {
      restaurants,
    },
  };
}

export function addRestaurant() { // add ~
  return {
    type: 'addRestaurant',
  };
} // ~ add
```

## (10) RestaurantForm 컴포넌트의 input 태그에서 사용자가 데이터를 입력했을 때의 액션을 테스트 및 구현
```jsx
// RestaurantCreateContainer.test.jsx
import React from 'react';

import { useDispatch, useSelector } from 'react-redux';

import { fireEvent, render } from '@testing-library/react';

import RestaurantCreateContainer from './RestaurantCreateContainer';

jest.mock('react-redux');

test('RestaurantCreateContainer', () => {
  const dispatch = jest.fn();

  useDispatch.mockImplementation(() => dispatch);

  useSelector.mockImplementation((selector) => selector({
    restaurant: { // add ~
      name: '마법',
      category: '이탈',
      address: '서울시',
    }, // ~ add
  }));

  const { getByText } = render(( // delete
  const { getByText, getByDisplayValue } = render(( // add
    <RestaurantCreateContainer />
  ));

  expect(getByText(/등록/)).not.toBeNull(); // delete
  expect(getByDisplayValue('마법')).not.toBeNull(); // add ~
  expect(getByDisplayValue('이탈')).not.toBeNull();
  expect(getByDisplayValue('서울시')).not.toBeNull();
  expect(getByText('등록')).not.toBeNull(); // ~ add

  fireEvent.click(getByText(/등록/)); // delete
  fireEvent.click(getByText('등록')); // add

  expect(dispatch).toBeCalledWith({
    type: 'addRestaurant',
  });
});
```

```jsx
// RestaurantForm.test.jsx

// 이 컴포넌트는 프레젠테이션 컨테이너기 때문에 리덕스의 존재를 몰라야함
import { render, fireEvent } from '@testing-library/react';

import RestaurantForm from './RestaurantForm';

test('RestaurantForm', () => {
  const restaurant = { // add ~
    name: '마법사주방',
    category: '이탈리안',
    address: '서울시 강남구',
  }; // ~ add

  const handleClick = jest.fn();

  const { getByText } = render(( // delete
  const { getByText, getByDisplayValue } = render(( // add

    <RestaurantForm
      restaurant={restaurant} // add
      onClick={handleClick}
    />
  ));

  expect(getByText(/등록/)).not.toBeNull(); // delete
  expect(getByDisplayValue('마법사주방')).not.toBeNull(); // add ~
  expect(getByDisplayValue('이탈리안')).not.toBeNull();
  expect(getByDisplayValue('서울시 강남구')).not.toBeNull();
  expect(getByText('등록')).not.toBeNull(); // ~ add

  fireEvent.click(getByText(/등록/)); // delete
  fireEvent.click(getByText('등록')); // add

  expect(handleClick).toBeCalled();
});
```

```jsx
// App.test.jsx
import React from 'react';

import { useDispatch, useSelector } from 'react-redux';

import { render } from '@testing-library/react';

import App from './App';

import restaurants from '../../fixtures/restaurants';

jest.mock('react-redux');

test('App', () => {
  const dispatch = jest.fn();

  useDispatch.mockImplementation(() => dispatch);

  useSelector.mockImplementation((selector) => selector({
    restaurants,
    restaurant: {}, // add
  }));

  const { getByText } = render((
    <App />
  ));

  expect(dispatch).toBeCalledWith({
    type: 'setRestaurants',
    payload: { restaurants },
  });

  expect(getByText(/김밥제국/)).not.toBeNull();
});
```

```jsx
// RestaurantCreateContainer.jsx
import { useDispatch } from 'react-redux'; // delete
import { useDispatch, useSelector } from 'react-redux'; // add

import RestaurantForm from './RestaurantForm';

import { addRestaurant } from './actions';

export default function RestaurantCreateContainer() {
  const dispatch = useDispatch();

  const { restaurant } = useSelector((state) => ({ // add ~
    restaurant: state.restaurant,
  }
  )); // ~ add

  function handleClick() {
    dispatch(addRestaurant());
  }

  return (
    <div>
      <RestaurantForm
        restaurant={restaurant} // add
        onClick={handleClick}
      />
    </div>
  );
}
```

```jsx
// RestaurantForm.jsx
export default function RestaurantForm({ onClick }) { // delete
export default function RestaurantForm({ // add ~
  restaurant,
  onClick,
}) { // ~ add
  return (
    <div>
      <input // add ~
        type="text"
        name="name"
        value={restaurant.name}
        onChange={() => {}}
      />
      <input
        type="text"
        name="category"
        value={restaurant.category}
        onChange={() => {}}
      />
      <input
        type="text"
        name="address"
        value={restaurant.address}
        onChange={() => {}}
      /> // ~ add
      <button
        type="button"
        onClick={onClick}
      >
        등록
      </button>
    </div>
  );
}
```

## (11) RestaurantForm 컴포넌트의 input 태그에 데이터 입력시 해당 input의 name 속성과 value를 가져오는 액션을 테스트 및 구현
```jsx
// RestaurantForm.test.jsx

// 이 컴포넌트는 프레젠테이션 컨테이너기 때문에 리덕스의 존재를 몰라야함
import { render, fireEvent } from '@testing-library/react';

import RestaurantForm from './RestaurantForm';

test('RestaurantForm', () => {
  const restaurant = {
    name: '마법사주방',
    category: '이탈리안',
    address: '서울시 강남구',
  };

  const handleChange = jest.fn(); // add
  const handleClick = jest.fn();

  const { getByText, getByDisplayValue } = render((

    <RestaurantForm
      restaurant={restaurant}
      onChange={handleChange} // add
      onClick={handleClick}
    />
  ));

  expect(getByDisplayValue('마법사주방')).not.toBeNull();
  expect(getByDisplayValue('이탈리안')).not.toBeNull();
  expect(getByDisplayValue('서울시 강남구')).not.toBeNull();
  expect(getByText('등록')).not.toBeNull();

  fireEvent.change((getByDisplayValue('서울시 강남구')), { // add ~
    target: { value: '서울시 강남구 역삼동' },
  });

  expect(handleChange).toBeCalledWith({
    name: 'address',
    value: '서울시 강남구 역삼동',
  }); // ~ add

  fireEvent.click(getByText('등록'));

  expect(handleClick).toBeCalled();
});
```

```jsx
// RestaurantForm.jsx
export default function RestaurantForm({
  restaurant,
  onChange, // add
  onClick,
}) {
  function handleChange(event) { // add ~
    const { target: { name, value } } = event;
    onChange({ name, value });
  } // ~ add

  return (
    <div>
      <input
        type="text"
        name="name"
        value={restaurant.name}
        onChange={() => {}} // delete
        onChange={handleChange} // add
      />
      <input
        type="text"
        name="category"
        value={restaurant.category}
        onChange={() => {}} // delete
        onChange={handleChange} // add
      />
      <input
        type="text"
        name="address"
        value={restaurant.address}
        onChange={() => {}} // delete
        onChange={handleChange} // add
      />
      <button
        type="button"
        onClick={onClick}
      >
        등록
      </button>
    </div>
  );
}
```

## (12) RestaurantCreateContainer 컴포넌트에서 dispatch 호출시 changeRestaurantFiled 액션 객체를 반환하는 액션을 테스트 및 구현
```jsx
// RestaurantCreateContainer.test.jsx
import React from 'react';

import { useDispatch, useSelector } from 'react-redux';

import { fireEvent, render } from '@testing-library/react';

import RestaurantCreateContainer from './RestaurantCreateContainer';

jest.mock('react-redux');

test('RestaurantCreateContainer', () => {
  const dispatch = jest.fn();

  useDispatch.mockImplementation(() => dispatch);

  useSelector.mockImplementation((selector) => selector({
    restaurant: {
      name: '마법',
      category: '이탈',
      address: '서울시',
    },
  }));

  const { getByText, getByDisplayValue } = render((
    <RestaurantCreateContainer />
  ));

  expect(getByDisplayValue('마법')).not.toBeNull();
  expect(getByDisplayValue('이탈')).not.toBeNull();
  expect(getByDisplayValue('서울시')).not.toBeNull();
  expect(getByText('등록')).not.toBeNull();

  fireEvent.change(getByDisplayValue('서울시'), { // add ~
    target: { value: '서울시 강남구 역삼동' },
  });

  // 여기는 컨테이너니깐 리덕스와 연결하는게 관심있음
  expect(dispatch).toBeCalledWith({
    type: 'changeRestaurantFiled',
    payload: {
      name: 'address',
      value: '서울시 강남구 역삼동',
    },
  }); // ~ add

  fireEvent.click(getByText('등록'));

  expect(dispatch).toBeCalledWith({
    type: 'addRestaurant',
  });
});
```

```jsx
// actions.jsx
export function changeRestaurantFiled({ name, value }) { // add ~
  return {
    type: 'changeRestaurantFiled',
    payload: {
      name,
      value,
    },
  };
} // ~ add

export function setRestaurants(restaurants) {
  return {
    type: 'setRestaurants',
    payload: {
      restaurants,
    },
  };
}

export function addRestaurant() {
  return {
    type: 'addRestaurant',
  };
}
```

```jsx
// RestaurantCreateContainer.jsx
import { useDispatch, useSelector } from 'react-redux';

import RestaurantForm from './RestaurantForm';

import { addRestaurant } from './actions'; // delete
import { // add ~
  addRestaurant,
  changeRestaurantFiled,
} from './actions'; // ~ add

export default function RestaurantCreateContainer() {
  const dispatch = useDispatch();
  const { restaurant } = useSelector((state) => ({
    restaurant: state.restaurant,
  }
  ));

  function handleChange({ name, value }) { // add ~
    dispatch(changeRestaurantFiled({ name, value }));
  } // ~ add

  function handleClick() {
    dispatch(addRestaurant());
  }
  return (
    <div>
      <RestaurantForm
        restaurant={restaurant}
        onChange={handleChange} // add
        onClick={handleClick}
      />
    </div>
  );
}
```

## (13) reducer 함수에서 changeRestaurantFiled일 때 change 값들을 담아오는 액션을 테스트 및 구현
```jsx
// reducer.test.js
import reducer from './reducer';

import {
  setRestaurants,
  changeRestaurantFiled, // add ~
  addRestaurant, // ~ add
} from './actions';

import restaurants from '../../fixtures/restaurants';
describe('reducer', () => {
  describe('setRestaurants', () => {
    it('changes restaurants array', () => {
      const initialState = {
        restaurants: [],
      };

      const state = reducer(initialState, setRestaurants(restaurants));

      expect(state.restaurants).not.toHaveLength(0);
    });
  });

  describe('changeRestaurantFiled', () => { // add ~
    it('changes restaurants form', () => {
      const initialState = {
        restaurant: {
          name: '이름',
          category: '분류',
          address: '주소',
        },
        restaurants: [],
      };

      const state = reducer(
        initialState,
        changeRestaurantFiled({
          name: 'name',
          value: '마법사주방',
        }),
      );

      expect(state.restaurant.name).toBe('마법사주방');
    });
  }); // ~ add
});
```

```jsx
// reducer.js
const initialState = {
  restaurants: [],
  restaurant: {}, // add
};

export default function reducer(state = initialState, action) {
  if (action.type === 'setRestaurants') {
    const { restaurants } = action.payload;
    return {
      ...state,
      restaurants,
    };
  }

  if (action.type === 'changeRestaurantFiled') { // add  ~
    const { name, value } = action.payload;
    return {
      ...state,
      restaurant: {
        ...state.restaurant,
        [name]: value,
      },
    };
  } // ~ add

  return state;
}
```

## (14) reducer 함수에서 등록 버튼 클릭시 발생하는 addRestaurant 액션 객체를 반환하는 테스트 및 구현
```jsx
// reducer.test.js
import reducer from './reducer';

import {
  setRestaurants,
  changeRestaurantFiled,
  addRestaurant,
} from './actions';

import restaurants from '../../fixtures/restaurants';

describe('reducer', () => {
  describe('setRestaurants', () => {
    it('changes restaurants array', () => {
      const initialState = {
        restaurants: [],
      };

      const state = reducer(initialState, setRestaurants(restaurants));

      expect(state.restaurants).not.toHaveLength(0);
    });
  });

  describe('changeRestaurantFiled', () => {
    it('changes restaurants form', () => {
      const initialState = {
        restaurant: {
          name: '이름',
          category: '분류',
          address: '주소',
        },
        restaurants: [],
      };

      const state = reducer(
        initialState,
        changeRestaurantFiled({
          name: 'name',
          value: '마법사주방',
        }),
      );

      expect(state.restaurant.name).toBe('마법사주방');
    });
  });

  describe('addRestaurant', () => { // add ~
    it('append restaurant into restaurants and clear restaurant form', () => {
      const initialState = {
        restaurants: [],
        restaurant: {
          name: '마법사주방',
          category: '이탈리안',
          address: '서울시 강남구 역삼동',
        },
      };

      const state = reducer(initialState, addRestaurant());

      expect(state.restaurants).toHaveLength(1);
      expect(state.restaurant.name).toBe('');
    });
  }); // ~ add
});
```

```jsx
// reducer.js
const initialRestaurant = { // add ~
  name: '',
  category: '',
  address: '',
}; // ~ add

const initialState = {
  restaurants: [],
  restaurant: {}, // delete
  restaurant: initialRestaurant, // add
};

export default function reducer(state = initialState, action) {
  if (action.type === 'setRestaurants') {
    const { restaurants } = action.payload;
    return {
      ...state,
      restaurants,
    };
  }
  if (action.type === 'changeRestaurantFiled') {
    const { name, value } = action.payload;
    return {
      ...state,
      restaurant: {
        ...state.restaurant,
        [name]: value,
      },
    };
  }

  if (action.type === 'addRestaurant') { // add  ~
    const { restaurant, restaurants } = state;

    return {
      ...state,
      restaurants: [...restaurants, restaurant],
      restaurant: initialRestaurant,
    };
  } // ~ add

  return state;
}
```

## (15) reducer 함수에서 등록 버튼 클릭시 발생하는 addRestaurant 액션 객체에 id값을 포함하는 액션을 테스트 및 구현
```jsx
// reducer.test.js
import reducer from './reducer';

import {
  setRestaurants,
  changeRestaurantFiled,
  addRestaurant,
} from './actions';

import restaurants from '../../fixtures/restaurants';

describe('reducer', () => {
  describe('setRestaurants', () => {
    it('changes restaurants array', () => {
      const initialState = {
        restaurants: [],
      };

      const state = reducer(initialState, setRestaurants(restaurants));

      expect(state.restaurants).not.toHaveLength(0);
    });
  });

  describe('changeRestaurantFiled', () => {
    it('changes restaurants form', () => {
      const initialState = {
        restaurant: {
          name: '이름',
          category: '분류',
          address: '주소',
        },
        restaurants: [],
      };

      const state = reducer(
        initialState,
        changeRestaurantFiled({
          name: 'name',
          value: '마법사주방',
        }),
      );

      expect(state.restaurant.name).toBe('마법사주방');
    });
  });

  describe('addRestaurant', () => {
    it('append restaurant into restaurants and clear restaurant form', () => {
      const initialState = {
        newId: 101, // add
        restaurants: [],
        restaurant: {
          name: '마법사주방',
          category: '이탈리안',
          address: '서울시 강남구 역삼동',
        },
      };

      const state = reducer(initialState, addRestaurant());

      expect(state.restaurants).toHaveLength(1);
      expect(state.restaurants[0].id).toBe(101); // add
      expect(state.restaurant.name).toBe('');
      expect(state.newId).toBe(102); // add
    });
  });
});
```

```jsx
// reducer.js
const initialRestaurant = {
  name: '',
  category: '',
  address: '',
};

const initialState = {
  newId: 100, // add
  restaurants: [],
  restaurant: initialRestaurant,
};

export default function reducer(state = initialState, action) {
  if (action.type === 'setRestaurants') {
    const { restaurants } = action.payload;
    return {
      ...state,
      restaurants,
    };
  }
  if (action.type === 'changeRestaurantFiled') {
    const { name, value } = action.payload;
    return {
      ...state,
      restaurant: {
        ...state.restaurant,
        [name]: value,
      },
    };
  }

  if (action.type === 'addRestaurant') {
    const { restaurant, restaurants } = state; // delete
    const { newId, restaurant, restaurants } = state; // add

    return {
      ...state,
      restaurants: [...restaurants, restaurant], // delete
      newId: newId + 1, // add ~
      restaurants: [...restaurants, { ...restaurant, id: newId }], // ~ add
      restaurant: initialRestaurant,
    };
  }
  return state;
}
```

## (16) reducer에서 addRestaurant 액션 객체에 id 값을 포함하는 테스트 코드를 더 명확하게 리팩터링
```js
// reducer.test.js
import reducer from './reducer';

import {
  setRestaurants,
  changeRestaurantFiled,
  addRestaurant,
} from './actions';

import restaurants from '../../fixtures/restaurants';

describe('reducer', () => {
  describe('setRestaurants', () => {
    it('changes restaurants array', () => {
      const initialState = {
        restaurants: [],
      };

      const state = reducer(initialState, setRestaurants(restaurants));

      expect(state.restaurants).not.toHaveLength(0);
    });
  });

  describe('changeRestaurantFiled', () => {
    it('changes restaurants form', () => {
      const initialState = {
        restaurant: {
          name: '이름',
          category: '분류',
          address: '주소',
        },
        restaurants: [],
      };

      const state = reducer(
        initialState,
        changeRestaurantFiled({
          name: 'name',
          value: '마법사주방',
        }),
      );

      expect(state.restaurant.name).toBe('마법사주방');
    });
  });

  describe('addRestaurant', () => {
    it('append restaurant into restaurants and clear restaurant form', () => {
      const initialState = {
        newId: 101,
        restaurants: [],
        restaurant: {
          name: '마법사주방',
          category: '이탈리안',
          address: '서울시 강남구 역삼동',
        },
      };

      const state = reducer(initialState, addRestaurant());

      expect(state.restaurants).toHaveLength(1);
      expect(state.restaurants[0].id).toBe(101); // delete

      const restaurant = state.restaurants[state.restaurants.length - 1]; // add ~
      expect(restaurant.id).toBe(101);
      expect(restaurant.name).toBe('마법사주방'); // ~ add

      expect(state.restaurant.name).toBe('');

      expect(state.newId).toBe(102);
    });
  });
});
```

## (17) RestaurantForm의 input 태그에 placeholder를 추가하는 리팩터링
```jsx
// RestaurantForm.jsx
export default function RestaurantForm({
  restaurant,
  onChange,
  onClick,
}) {
  function handleChange(event) {
    const { target: { name, value } } = event;
    onChange({ name, value });
  }
  return (
    <div>
      <input
        type="text"
        placeholder="이름" // add
        name="name"
        value={restaurant.name}
        onChange={handleChange}
      />
      <input
        type="text"
        placeholder="분류" // add
        name="category"
        value={restaurant.category}
        onChange={handleChange}
      />
      <input
        type="text"
        placeholder="주소" // add
        name="address"
        value={restaurant.address}
        onChange={handleChange}
      />
      <button
        type="button"
        onClick={onClick}
      >
        등록
      </button>
    </div>
  );
}
```

## (18) App 컴포넌트의 useEffect로 초기값이 빈 배열일 경우 정상적으로 동작하는 액션을 위한 테스트 및 구현
```jsx
// App.test.jsx
import React from 'react';

import { useDispatch, useSelector } from 'react-redux';

import { render } from '@testing-library/react';

import App from './App';

import restaurants from '../../fixtures/restaurants'; // delete

jest.mock('react-redux');

test('App', () => {
  const dispatch = jest.fn();
  useDispatch.mockImplementation(() => dispatch);

  useSelector.mockImplementation((selector) => selector({
    restaurants, // delete
    restaurants: [], // add
    restaurant: {},
  }));

  const { getByText } = render(( // delete
  const { queryByText } = render(( // add
    <App />
  ));

  expect(dispatch).toBeCalledWith({
    type: 'setRestaurants',
    payload: { restaurants }, // delete
    payload: { restaurants: [] }, // add
  });

  expect(getByText(/김밥제국/)).not.toBeNull(); // delete
  // get은 못찾으면 에러를 발생하기 때문에, query로 바꾼다 // add ~
  // query는 못찾으면 null을 반환하기 때문에 이를 이용한다.
  expect(queryByText(/김밥제국/)).toBeNull(); // ~ add
});
```

```jsx
// App.jsx
import { useEffect } from 'react';

import { useDispatch } from 'react-redux';

import RestaurantsContainer from './RestaurantsContainer';
import RestaurantCreateContainer from './RestaurantCreateContainer';

import {
  setRestaurants,
} from './actions';

import restaurants from '../../fixtures/restaurants'; // delete

export default function App() {
  const dispatch = useDispatch();

  useEffect(() => {
    dispatch(setRestaurants(restaurants)); // delete
    dispatch(setRestaurants([])); // add
  }, []);

  return (
    <div>
      <h1>Restaurants</h1>
      <RestaurantsContainer />
      <RestaurantCreateContainer />
    </div>
  );
}
```

<!-- ⓵ ⓶ ⓷ ⓸ ⓹ ⓺ ⓻ ⓼ ⓽ ⓾ -->

<!-- ### 2. Link 넣기

```

유형 1: (설명어를 입력) : [gunhee's coding blog](https://gunhee-jeong.github.io/)
유형 2: (URL 자동연결) : <https://gunhee-jeong.github.io/>
유형 3: (동일 파일 내 '문단으로 이동') : [1. Header로 이동](###-1-header)

```

유형 1: (설명어를 입력) : [gunhee's coding blog](https://gunhee-jeong.github.io/)
유형 2: (URL 자동연결) : <https://gunhee-jeong.github.io/>
유형 3: (동일 파일 내 '문단으로 이동') : [1. Header로 이동](#1-header)
유형 3의 방법

1. 특수문자를 제거
2. 스페이스는 -로 바꾸고
3. 대문자는 소문자로!
   그래서 ### 1. Header -> #1-header

## Link: [google][https://www.google.com/]

### 3. 수평선

```

---

```

---

### 4. 라인 바꾸기

```

스페이스바를 2번 눌러주면 다음칸으로
이동할 수 있어요!

```

---

스페이스바를 2번 눌러주면
다음칸으로 이동할 수 있어요!

### 5. list 만들기

```

1. 1번
2. 2번
3. 3번

- 순서없는 list
  - 순서없는 list
    - 순서없는 list

```

1. 1번
2. 2번
3. 3번

- 순서없는 list
  - 순서없는 list
    - 순서없는 list

---

### 6. font 관련

```

**진하게** -> 볼드
_기울여서_ -> 이탤릭체
~~취소선~~ -> 취소선

<ul>밑줄넣기</ul> -> 밑줄
<span style="color:red">빨간 글씨</span> -> 글자색
이것이 `인라인` 입니다 -> 인라인 코드
```

**진하게** -> 볼드
_기울여서_ -> 이탤릭체
~~취소선~~ -> 취소선
<u>밑줄넣기</u> -> 밑줄
<span style="color:red">빨간 글씨</span>
이것이 `인라인` 입니다 -> 인라인 코드

---

### 7. 인용구문

```
> coding
>
> > JavaScript
> >
> > > 내가 프짱!
```

> coding
>
> > JavaScript
> >
> > > 내가 프짱!

---

### 8. 이미지 삽입

```
유형1: ('사이즈를 조절' -> HTML 태그 사용) : <img src="https://gunhee-jeong.github.io/assets/images/blogLogo.png" width="300" height="200">
유형2: (이미지 삽입 후 -> 링크 걸기)
[![이미지](https://gunhee-jeong.github.io/assets/images/blogLogo/blogLogo.png)](https://gunhee-jeong.github.io/)
```

유형1: ('사이즈를 조절' -> HTML 태그 사용) : <img src="https://gunhee-jeong.github.io/assets/images/blogLogo.png" width="300" height="200">
유형2: (이미지 삽입 후 -> 링크 걸기)
[![이미지](https://gunhee-jeong.github.io/assets/images/blogLogo.png)](https://gunhee-jeong.github.io/)

### 9. 표 만들기

```
||국어|영어|
| :--- | ---: | :--: |
|건희 | 100점 | 100점
|철수 | 100점 | 100점
```

|      |  국어 | 영어  |
| :--- | ----: | :---: |
| 건희 | 100점 | 100점 |
| 철수 | 100점 | 100점 |

> - header를 넣고 싶은 경우 ---을 사용하고 :을 이용하여 정렬에 사용함!

### 10. 토글 만들기

```
<details>
<summary>여기를 누르세요</summary>
<div markdown="1">
숨겨진 내용
</div>
</details>
```

<details>
<summary>여기를 누르세요</summary>
<div markdown="1">
숨겨진 내용
</div>
</details> -->
