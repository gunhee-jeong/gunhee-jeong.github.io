---
layout: single
title: "모두의 네트워크 -> 8장 네트워크의 전체 흐름 살펴보기"
# categories: Git
categories:
  - network # HTML CSS JavaScript Server Algorithm Wecode Programmers CS vsCode
tag: [모두의 네트워크] #tag는 여러개 가능함
toc: true #table of content 기능!
toc_sticky: true
author_profile: true #blog 글안에서는 author_profile이 따라다니지 않도록 설정함
date: 2022-05-12T09:50:00+09:00   
# sidebar:
# nav: "docs" #네비게이션에 있는 docs를 의미함
---  
# 32장 랜 카드에서의 데이터 전달과 처리
<u>웹에 접속할 때는</u> `OSI 모델의 상위 계층`부터 <span style="color:red">캡슐화</span>가 이루어진다.  

## 1. 네트워크의 구성

<img src="https://user-images.githubusercontent.com/87808288/178630196-81eab388-31de-4090-a2f5-1f088cb2f61e.png" width="500">  

아래와 같이 컴퓨터, 스위치, 라우터, 웹 서버로 구성된 네트워크는  
<u>192.168.1.0/24</u>, <u>172.16.0.0.16</u>, <u>192.168.10.0/24</u>로 총 3개의 네트워크로 나누어져 있다.  
<img src="https://user-images.githubusercontent.com/87808288/167971147-006c1e79-4dac-4708-832a-6fd00c9f2ec0.png" width="500">  

<img src="https://user-images.githubusercontent.com/87808288/167971470-45f7b7ca-e2b4-4fd1-8e83-8093947c5c9e.png" width="600">  

## 2. 컴퓨터의 데이터가 전기 신호로 변환되는 과정
웹 사이트에 접속해야 하므로 응용 계층에서 시작하게 된다.  
웹 브라우저에 URL을 입력하고 '엔터'를 누르면 캡슐화가 시작된다.  
(3-way 핸드셰이크는 이미 완료되어 연결이 확립되어 있다고 가정한다.)  

컴퓨터에서 웹 브라우저를 이용하여 <span style="color:blue">웹 서버</span>의 웹 사이트에 접속하기 위한 `요청을 보낼 때 사용`하는 것이  
<span style="color:red">HTTP 프로토콜</span>이었다. 응용 계층에서는 웹 서버에 있는 html 데이터를 얻어야 하므로  
아래의 그림처럼 'GET /index.html HTTP/1.1 ~'과 같은 HTTP 메시지를 보낸다.  
<img src="https://user-images.githubusercontent.com/87808288/178632031-ee641df3-7d19-470b-944b-1a7aa3dc9297.png" width="500">  

HTTP 메시지의 GET은 데이터를 보내달라는 의미를 가진다.  
계속해서 이 데이터가 전송 계층에 전달된다.  
그리고 <span style="color:red">전송 계층</span>에서는 <span style="color:red">TCP 헤더</span>가 붙게 된다.  
전송 계층의 TCP 헤더에서 -> 어느 애플리케이션에 데이터를 보내야 하는지 식별하는 데 필요한 번호는  
잘 알려진 포트가 아닌 포트(1025번 이상인 포트) 중에서 무작위로 선택된다.  
한편 목적지 포트 번호는 HTTP이므로 80번 포트가 된다.  

그렇게 TCP 헤더가 붙은 데이터인 -> <span style="color:red">세그먼트</span>가 된다.  
<img src="https://user-images.githubusercontent.com/87808288/167972964-4c7f28ec-80b4-46d2-8f94-40accf7cb04c.png" width="600">  

그다음에는 데이터가 네트워크 계층에 전달된다. 이때 <span style="color:red">네트워크 계층</span>에는 <span style="color:red">IP 헤더</span>가 붙게 된다.  
네트워크 계층에서는 전송 계층에서 전달받은 세그먼트(데이터)에 IP 헤더를 붙이게 된다.  
그 IP 헤더에 출발지 컴퓨터와 목적지 서버의 위치를 알려주는 -> 출발지 IP 주소와 목적지 IP 주소가 들어있는  
<span style="color:red">IP 패킷</span>이 추가되는 것이다.  
<img src="https://user-images.githubusercontent.com/87808288/178632913-da9903ad-e502-4481-898c-983d48c0ae0a.png" width="550">  

그다음에는 데이터 링크 계층으로 전달된다.  
<span style="color:red">데이터 링크 계층</span>에서는 <span style="color:blue">이더넷 헤더</span>가 추가된다.  
그렇게 `이더넷 헤더` + `트레일러(FCS)`가 있는 데이터를 -> <span style="color:red">이더넷 프레임</span>이라고 한다.  
아래의 그림과 같이 이더넷 헤더가 붙어 이더넷 프레임이 된다.  
그다음으로 <span style="color:red">물리 계층</span>에서 <span style="color:blue">전기 신호로 변환되어 네트워크로 전송</span>되는 것이다.  
<img src="https://user-images.githubusercontent.com/87808288/178633852-041100d1-ceac-4d95-a746-91c7fa2c5b5a.png" width="550">  

# 33장 스위치와 라우터에서의 데이터 전달과 처리
<span style="color:red">스위치</span> 내에 대응되는 OSI 모델의 계층은 <span style="color:blue">물리 계층</span>과 <span style="color:blue">데이터 링크 계층</span>이다.  
<span style="color:red">라우터</span> 내에 대응되는 OSI 모델의 계층은 <span style="color:blue">물리 계층</span>, <span style="color:blue">데이터 링크 계층</span>, <span style="color:blue">네트워크 계층</span>이다.  

## 1. 스위치에서의 데이터 전달과 처리
<img src="https://user-images.githubusercontent.com/87808288/167977868-a9aece8d-8341-46e6-be7f-2ac62b54619f.png" width="500">  

아래의 그림에서 스위치 A는 데이터 링크 계층에서 데이터를 전기 신호로 변환하여 라우터 A로 전송한다.  
<img src="https://user-images.githubusercontent.com/87808288/167978100-eca98769-7cda-476d-a97b-0e4bc9487240.png" width="500">  

## 2. 라우터에서의 데이터 전달과 처리
계속해서 데이터는 아래의 그림처럼, 스위치 A에서 라우터 A로 전기 신호로 전달된다.  
<img src="https://user-images.githubusercontent.com/87808288/167977868-a9aece8d-8341-46e6-be7f-2ac62b54619f.png" width="500">  

라우터 A에서의 캡슐화와 역캡슐화에 대해 살펴보자면,  
아래의 그림과 같이 스위치 A에서 데이터가 <span style="color:royalblue">전기 신호</span>로 변환되어 케이블을 통해 흘러가  
라우터 A에 도착하면 라우터 A는 <span style="color:blue">데이터 링크 계층</span>에서 이더넷 프레임의 <span style="color:blue">목적지 MAC 주소</span>와 자신의 MAC 주소를 비교한다.  
이때 주소가 같으면 -> 이더넷 헤더와 트레일러를 분리하는 역캡슐화를 수행한다.  
다음으로 <span style="color:blue">네트워크 계층</span>에 전달하고 자신의 라우팅 테이블과 목적지 IP 주소를 비교한다.  
<img src="https://user-images.githubusercontent.com/87808288/167978897-9745d384-bcf3-4320-9595-d406f832efcd.png" width="600">  

라우터 A의 라우팅 테이블에서 목적지 IP 주소의 경로를 알 수 있으므로 <span style="color:blue">라우팅</span>을 할 수 있다.  
아래의 그럼처럼 현재 출발지 IP 주소 192.168.1.10을  
라우터의 외부 IP 주소(실제로는 왠(WAN)측)인 172.16.0.1로 변경한다.  
그런 다음 <span style="color:blue">데이터 링크 계층</span>으로 전달하여 라우터 B로 보내지도록 이더넷 헤더와 트레일러를 붙인 후 ->  
<span style="color:blue">물리 계층</span>에서 데이터를 전기 신호로 변환하여 네트워크로 전달한다.  
<img src="https://user-images.githubusercontent.com/87808288/167979418-2f9cc9e3-b43d-42a0-bb08-6686adea6c17.png" width="500">  

그다음 데이터는 <span style="color:blue">전기 신호</span> 형태로 라우터 A에서 라우터 B로 전달된다.  
라우터 B에서 이루어지는 OSI 모델의 역캡슐화와 캡슐화를 살펴보면  
아래의 그림과 같이 데이터가 전기 신호로 변환되어 케이블을 통해 라우터 A에서 라우터 B에 도착하면  
라우터 B는 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교한다.  
주소가 같으면 이더넷 헤더와 트레일러를 분리하는 역캡슐화를 수행한다.  
그다음 네트워크 계층으로 전달되면 자신의 라우팅 테이블과 목적지 IP 주소를 비교한다.  
라우터 A와 마찬가지로 라우팅 테이블을 확인하는 이유는 -> 라우터 B도 목적지의 네트워크를 알아야 하기 때문이다.  
<img src="https://user-images.githubusercontent.com/87808288/167979925-c4e16e5b-2315-4d31-add6-62e6bec61889.png" width="500">  

그리고 아래와 같이 현재의 출발지 IP 주소 172.16.0.1을 라우터 B의 내부 IP 주소(실제는 랜(LAN) 측)인  
192.168.10.1로 변경한다.  
그런 다음 데이터 링크 계층에 전달하여 스위치에 전달되도록 이더넷 헤더와 트레일러(FCS)를 붙인 후  
물리 계층에서 데이터를 전기 신호로 변환하여 네트워크로 전달한다.  
<img src="https://user-images.githubusercontent.com/87808288/167980643-3a018b48-e1bd-4fae-ba0c-e8be86c8c2d9.png" width="500">  

이제는 전기 신호 형태의 데이터가 라우터 B에서 스위치 B로 전달된다.  
스위치 B는 전기 신호를 데이터 링크 계층에서 처리하고 웹 서버에 데이터를 전기 신호로 전달한다.  

아래의 그림과 같이 전기 신호를 데이터 링크 계층에서 처리하고 웹 서버에 데이터를 전기 신호로 전달한다.  
<img src="https://user-images.githubusercontent.com/87808288/178648893-5f7c0af7-7fe5-4647-83a2-1dc890c4dae7.png" width="500">  

# 34장 웹 서버에서의 데이터 전달과 처리
## 1. 웹 서버에서의 데이터 전달과 처리
<img src="https://user-images.githubusercontent.com/87808288/178649422-7ae6cf8f-5517-4891-8a4a-ea3cfb997221.png" width="500">  

아래와 같이 데이터가 전기 신호로 웹 서버에 도착하면  
웹 서버는 <span style="color:blue">데이터 링크 계층</span>에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교한다.  
주소가 같으면 <u>이더넷 헤더</u>와 <u>트레일러</u>를 분리하고 네트워크 계층에 전달한다.  

<span style="color:blue">네트워크 계층</span>에서는 -> 목적지 IP 주소와 웹 서버의 IP 주소가 같은지 확인한다.  
주소가 같으면 <u>IP 헤더를 분리</u>하고 전송 계층에 전달한다.  

<span style="color:blue">전송 계층</span>에서는 -> 목적지 포트 번호를 확인하여 어떤 애플리케이션으로 전달해야 되는지 판단하고  
<u>TCP 헤더를 분리</u>하여 응용 계층에 전달한다.  

마지막으로 웹 서버의 응용 계층에 도착한다.  

<img src="https://user-images.githubusercontent.com/87808288/168424178-f60a932b-01d6-423e-8d98-92392154c7e3.png" width="600">  

<img src="" width="600">  

<!-- ### 2. Link 넣기

```

유형 1: (설명어를 입력) : [gunhee's coding blog](https://gunhee-jeong.github.io/)
유형 2: (URL 자동연결) : <https://gunhee-jeong.github.io/>
유형 3: (동일 파일 내 '문단으로 이동') : [1. Header로 이동](###-1-header)

```

유형 1: (설명어를 입력) : [gunhee's coding blog](https://gunhee-jeong.github.io/)
유형 2: (URL 자동연결) : <https://gunhee-jeong.github.io/>
유형 3: (동일 파일 내 '문단으로 이동') : [1. Header로 이동](#1-header)
유형 3의 방법

1. 특수문자를 제거
2. 스페이스는 -로 바꾸고
3. 대문자는 소문자로!
   그래서 ### 1. Header -> #1-header

## Link: [google][https://www.google.com/]

### 3. 수평선

```

---

```

---

### 4. 라인 바꾸기

```

스페이스바를 2번 눌러주면 다음칸으로
이동할 수 있어요!

```

---

스페이스바를 2번 눌러주면
다음칸으로 이동할 수 있어요!

### 5. list 만들기

```

1. 1번
2. 2번
3. 3번

- 순서없는 list
  - 순서없는 list
    - 순서없는 list

```

1. 1번
2. 2번
3. 3번

- 순서없는 list
  - 순서없는 list
    - 순서없는 list

---

### 6. font 관련

```

**진하게** -> 볼드
_기울여서_ -> 이탤릭체
~~취소선~~ -> 취소선

<ul>밑줄넣기</ul> -> 밑줄
<span style="color:red">빨간 글씨</span> -> 글자색
이것이 `인라인` 입니다 -> 인라인 코드
```

**진하게** -> 볼드
_기울여서_ -> 이탤릭체
~~취소선~~ -> 취소선
<u>밑줄넣기</u> -> 밑줄
<span style="color:red">빨간 글씨</span>
이것이 `인라인` 입니다 -> 인라인 코드

---

### 7. 인용구문

```
> coding
>
> > JavaScript
> >
> > > 내가 프짱!
```

> coding
>
> > JavaScript
> >
> > > 내가 프짱!

---

### 8. 이미지 삽입

```
유형1: ('사이즈를 조절' -> HTML 태그 사용) : <img src="https://gunhee-jeong.github.io/assets/images/blogLogo.png" width="300" height="200">
유형2: (이미지 삽입 후 -> 링크 걸기)
[![이미지](https://gunhee-jeong.github.io/assets/images/blogLogo/blogLogo.png)](https://gunhee-jeong.github.io/)
```

유형1: ('사이즈를 조절' -> HTML 태그 사용) : <img src="https://gunhee-jeong.github.io/assets/images/blogLogo.png" width="300" height="200">
유형2: (이미지 삽입 후 -> 링크 걸기)
[![이미지](https://gunhee-jeong.github.io/assets/images/blogLogo.png)](https://gunhee-jeong.github.io/)

### 9. 표 만들기

```
||국어|영어|
| :--- | ---: | :--: |
|건희 | 100점 | 100점
|철수 | 100점 | 100점
```

|      |  국어 | 영어  |
| :--- | ----: | :---: |
| 건희 | 100점 | 100점 |
| 철수 | 100점 | 100점 |

> - header를 넣고 싶은 경우 ---을 사용하고 :을 이용하여 정렬에 사용함!

### 10. 토글 만들기

```
<details>
<summary>여기를 누르세요</summary>
<div markdown="1">
숨겨진 내용
</div>
</details>
```

<details>
<summary>여기를 누르세요</summary>
<div markdown="1">
숨겨진 내용
</div>
</details> -->
