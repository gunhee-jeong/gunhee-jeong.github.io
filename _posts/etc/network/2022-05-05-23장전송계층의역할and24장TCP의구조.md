---
layout: single
title: "23장 전송 계층의 역할, 24장 TCP 구조"
# categories: Git
categories:
  - network # HTML CSS JavaScript Server Algorithm Wecode Programmers CS vsCode
tag: [모두의 네트워크] #tag는 여러개 가능함
toc: true #table of content 기능!
toc_sticky: true
author_profile: true #blog 글안에서는 author_profile이 따라다니지 않도록 설정함
date: 2022-05-06T22:10:00+09:00   
# sidebar:
# nav: "docs" #네비게이션에 있는 docs를 의미함
---  
# 23장 전송 계층의 역할  
## (1) 전송 계층의 두 가지 역할  
다른 네트워크로 데이터를 전송하려면 라우터가 필요하고 -> 라우터의 라우팅 기능을 사용하여 전송할 수 있었다.  
하지만 라우팅 정보가 잘못되어있거나, 많은 라우터를 경유하는 도중에 라우터에 문제가 생기거나 하여서  
라우터의 라우팅 기능을 통해 데이터를 전송하여도 목적지에 도착하지 못하는 일이 발생한다.  

물리 계층, 데이터 링크 계층, 네트워크 계층의 3계층이 있으면 목적지에 데이터를 보낼 수 있지만,   
데이터가 손상되거나 유실되더라도 이들 계층에서는 할 수 있는 것이 없다.  
<img src="https://user-images.githubusercontent.com/87808288/165018916-ad460a58-37c8-41ff-b66d-f3b1acf8aec0.png" width="300">  

<span style="color:red">전송 계층</span>은 -> <span style="color:blue">목적지에 신뢰할 수 있는 데이터를 전달</span>하기 위해 필요하다.  
전송 계층에는 <span style="color:blue">오류를 점검하는 기능</span>이 있다. 오류가 발생하면 데이터를 재전송하도록 요청한다.  
그리고 전송된 데이터의 `목적지가 어떤 애플리케이션인지 식별하는 기능도` 하고 있다.  

## (2) 연결형 통신과 비연결형 통신  
전송 계층의 특징을 간단히 설명하면 신뢰성/ 정확성과 효율성으로 구분할 수 있다.  
신뢰성/ 정확성은 -> 데이터를 목적지에 문제없이 전달하는 것이고, -> (연결형 통신)  
효율성은 -> 데이터를 빠르고 효율적으로 전달하는 것이다. -> (비연결형 통신)  
여기서 신뢰할 수 있고 정확한 데이터를 전달하는 통신을 연결형 통신이라고하고,  
효율적으로 데이터를 전달하는 통신을 비연결형 통신이라고 한다.  

연결형 통신은 -> 상대편과 확인해 가면서 통신하는 방식  
비연결현 통신 -> 상대편을 확인하지 않고 일방적으로 데이터를 전송하는 방식이다.  
<span style="color:red">연결형 통신</span>은 `신뢰성/ 정확성`이 우선인 통신이라서 여러 번 확인하고 보내는 데 반해,  
<span style="color:red">비연결형 통신</span>은 신뢰성과 정확성보다는 `효율성`이 우선인 통신이므로 확인 절차 없이 일방적으로 보내게 된다.  

일반적으로 <span style="color:blue">신뢰성과 정확성이 보장되지 않는 통신</span>은 사용하고 싶지 않은 것이 보통이지만,  
동영상을 볼 때는 비연결형 통신을 사용하게 된다.  
동영상은 신뢰할 수 있고 정확한 데이터 전송보다 빠른 전송이 필요하기 때문이다.  
(동영상의 데이터가 늦게 도착하여 버퍼링이 발생하는 것보다, 데이터가 유실되더라도 원활하게 보는 것을 선호한다.)  

전송 계층의 연결형 통신 프로토콜에는 TCP가 사용되고, 비연결형 통신 프로토콜에는 UDP가 사용된다.  

# 24장 TCP의 구조  
## (1) TCP란?  
TCP는 신뢰성과 정확성을 우선으로 하는 연결형 통신 프로토롤이다.  
<img src="https://user-images.githubusercontent.com/87808288/167148924-9f1df419-62e8-4e38-a524-d688a4ab159b.png" width="600">  
(캡슐화와 역캡슐화) : [사진출처 -> ychaeeun](https://ychaeeun.github.io/network-encapsulation/)  

TCP로 `전송할 때` 붙이는 헤더를 <span style="color:red">TCP 헤더</span>라고하고, 이 <span style="color:blue">TCP 헤더가 붙은 데이터</span>를 <span style="color:red">세그먼트</span>라고 한다.  
<img src="https://user-images.githubusercontent.com/87808288/167150731-cc2047cb-2a48-4498-8fc9-52a86fbec1e2.png" width="500">  

연결형 통신은 꼼꼼하게 상대방을 확인하면서 데이터를 전송하는데,  
그 데이터를 전송하기 전에 해야 하는 작업이 존재한다.  
데이터를 전송하려면 먼저 <span style="color:blue">연결(connectioin)</span>이라는 가상의 독점 통신로를 확보해야 한다.  

TCP 헤더의 <span style="color:red">코드 비트</span>를 부분 살펴보면 -> 코드 비트는 TCP 헤더의 107번째 비트부터 112번째 비트까지의 6비트로  
연결의 제어 정보가 기록되는 곳이다.  
코드 비트는 각 비트별로 역할이 있는데 -> 초깃값은 0이고 비트가 활성화되면 1이 된다.  
<span style="color:blue">연결을 확립</span>하려면 이 중 `SYN`과 `ACK`가 필요하다.  
SYN(씬)은 연결 요청, ACK(애크)는 확인 응답을 뜻한다.  

## (2) 3-way 핸드셰이크란?  
연결은 아래와 같이 SYN과 ACK를 사용하여 확립할 수 있다.  
신뢰할 수 있는 연결을 하려면 데이터를 전송하기 전에 패킷을 교환하는데, 아래와 같이 세 번 확인한다.  
<img src="https://user-images.githubusercontent.com/87808288/167152040-09e58391-eaf5-4589-8f9e-38777894f072.png" width="500">   

1. 통신을 하려면 컴퓨터 2에게 허가를 받아야 하므로, 먼저 컴퓨터 1에서 컴퓨터 2로 연결 확립 허가를 받기 위한 요청(SYN)을 보냄  
2. 컴퓨터 2는 컴퓨터 1이 보낸 요청을 받은 후에 허가한다는 응답을 회신하기 위해 연결 확립 응답(ACK)을 보냄  
동시에 컴퓨터 2도 컴퓨터 1에게 데이터 전송 허가를 받기 위해 연결 확립 요청(SYN)을 보냄  
3. 컴퓨터 2의 요청을 받은 컴퓨터 1은 컴퓨터 2로 허가한다는 응답으로 연결 확립 응답(ACK)을 보냄  

이때 -> 연결 확입을 위해 코드 비트의 SYN과 ACK가 1로 활성화된다.  
이처럼 데이터를 보내기 전에 <span style="color:blue">연결을 확립하기 위해 패킷 요청을 세 번 교환</span>하는 것을 <span style="color:red">3-way 핸드셰이크</span>라고 한다.  
'핸드셰이크'는 사람들이 상대방을 확인하고 악수를 하는 것처럼 데이터 통신에서도 확실하게 데이터가 전송되었는지  
확인하면서 이루어지는 통신 수단이다.  

데이터를 전송한 후에는 -> 이를 끊기 위한 요청을 교환해야 한다.  
<span style="color:blue">연결을 끊을 때</span>는 `FIN`과 `ACK`를 사용하는데, FIN은 연결 종료를 뜻한다.  
<img src="https://user-images.githubusercontent.com/87808288/167153493-6e61afa2-8434-4b94-a297-f4e1fb086e40.png" width="600">   

1. 컴퓨터 1에서 컴퓨터 2로 연결 종료 요청(FIN)을 보낸다.  
2. 컴퓨터 2에서 컴퓨터 1로 연결 종료 응답(ACK)을 반환한다.  
3. 또한 컴퓨터 2에서도 컴퓨터 1로 연결 종료 요청(FIN)을 보낸다.  
4. 컴퓨터 1에서 컴퓨터 2로 연결 종료 응답(ACK)을 반환한다.  

`연결을 확립`할 때는 <span style="color:red">SYN</span>을 사용하고, `연결을 종료`할 때는 <span style="color:red">FIN</span>을 사용하는 것이다.  
TCP는 신뢰성과 정확성을 중요하게 여기는 프로토콜이므로 상대방이 문제가 없는지 확실히 확인하게 된다.  

<!-- ### 2. Link 넣기

```

유형 1: (설명어를 입력) : [gunhee's coding blog](https://gunhee-jeong.github.io/)
유형 2: (URL 자동연결) : <https://gunhee-jeong.github.io/>
유형 3: (동일 파일 내 '문단으로 이동') : [1. Header로 이동](###-1-header)

```

유형 1: (설명어를 입력) : [gunhee's coding blog](https://gunhee-jeong.github.io/)
유형 2: (URL 자동연결) : <https://gunhee-jeong.github.io/>
유형 3: (동일 파일 내 '문단으로 이동') : [1. Header로 이동](#1-header)
유형 3의 방법

1. 특수문자를 제거
2. 스페이스는 -로 바꾸고
3. 대문자는 소문자로!
   그래서 ### 1. Header -> #1-header

## Link: [google][https://www.google.com/]

### 3. 수평선

```

---

```

---

### 4. 라인 바꾸기

```

스페이스바를 2번 눌러주면 다음칸으로
이동할 수 있어요!

```

---

스페이스바를 2번 눌러주면
다음칸으로 이동할 수 있어요!

### 5. list 만들기

```

1. 1번
2. 2번
3. 3번

- 순서없는 list
  - 순서없는 list
    - 순서없는 list

```

1. 1번
2. 2번
3. 3번

- 순서없는 list
  - 순서없는 list
    - 순서없는 list

---

### 6. font 관련

```

**진하게** -> 볼드
_기울여서_ -> 이탤릭체
~~취소선~~ -> 취소선

<ul>밑줄넣기</ul> -> 밑줄
<span style="color:red">빨간 글씨</span> -> 글자색
이것이 `인라인` 입니다 -> 인라인 코드
```

**진하게** -> 볼드
_기울여서_ -> 이탤릭체
~~취소선~~ -> 취소선
<u>밑줄넣기</u> -> 밑줄
<span style="color:red">빨간 글씨</span>
이것이 `인라인` 입니다 -> 인라인 코드

---

### 7. 인용구문

```
> coding
>
> > JavaScript
> >
> > > 내가 프짱!
```

> coding
>
> > JavaScript
> >
> > > 내가 프짱!

---

### 8. 이미지 삽입

```
유형1: ('사이즈를 조절' -> HTML 태그 사용) : <img src="https://gunhee-jeong.github.io/assets/images/blogLogo.png" width="300" height="200">
유형2: (이미지 삽입 후 -> 링크 걸기)
[![이미지](https://gunhee-jeong.github.io/assets/images/blogLogo/blogLogo.png)](https://gunhee-jeong.github.io/)
```

유형1: ('사이즈를 조절' -> HTML 태그 사용) : <img src="https://gunhee-jeong.github.io/assets/images/blogLogo.png" width="300" height="200">
유형2: (이미지 삽입 후 -> 링크 걸기)
[![이미지](https://gunhee-jeong.github.io/assets/images/blogLogo.png)](https://gunhee-jeong.github.io/)

### 9. 표 만들기

```
||국어|영어|
| :--- | ---: | :--: |
|건희 | 100점 | 100점
|철수 | 100점 | 100점
```

|      |  국어 | 영어  |
| :--- | ----: | :---: |
| 건희 | 100점 | 100점 |
| 철수 | 100점 | 100점 |

> - header를 넣고 싶은 경우 ---을 사용하고 :을 이용하여 정렬에 사용함!

### 10. 토글 만들기

```
<details>
<summary>여기를 누르세요</summary>
<div markdown="1">
숨겨진 내용
</div>
</details>
```

<details>
<summary>여기를 누르세요</summary>
<div markdown="1">
숨겨진 내용
</div>
</details> -->
